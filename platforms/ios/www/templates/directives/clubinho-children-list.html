<div class="children" ng-if="children">
  <ul>
    <li ng-repeat="child in children" class="{{child.avatar}}" ng-click="toggleChild(child, $event)"  ng-class="{open: child.open}">
      <div class="wrapper">
        <div class="avatar">
          <img ng-src="img/avatar-{{child.avatar}}.png">
        </div>
        <div class="user">
          <h2>{{child.name}}</h2>
          <h3>{{child.age}} anos</h3>
          <div class="details" ng-if="child.timeline.length && !addChild && !child.eventToConfirm">
            <h3>Últimos eventos e resgates:</h3>
            
            <span ng-repeat="event in child.timeline | limitTo: 10">
              <span class="border"></span>
              <h4 ng-if="event.type == 'event'">{{event.title}} <span>+{{event.points}} pts</span> <small>{{event.date | date:'dd/MM'}}</small></h4>
              <h4 ng-if="event.type == 'reedem'">Resgate {{event.prize}} <span>-{{event.points}} pts</span> <small>{{event.date | date:'dd/MM'}}</small></h4>
            </span>                                          
          </div>
          <div class="details" ng-if="!child.timeline.length && !addChild && !child.eventToConfirm">
            <h3>criança sem pontuação</h3>
          </div>
          <div class="details" ng-if="child.eventToConfirm">
            <h3>O {{child.name}} estava presente no evento <strong>{{child.eventToConfirm.title}}</strong> dia <strong>{{child.eventToConfirm.date | date:'dd/MM'}}</strong> às <strong>{{child.eventToConfirm.date | date:'HH:mm'}}</strong>?</h3>
            <button type="button" class="btn-yes" ng-click="confirm(child)">Sim</button>
            <button type="button" class="btn-no" ng-click="decline(child)">Não</button>
          </div>
          <div class="details" ng-if="addChild">
            <button type="button" class="btn-yes" ng-click="editChild(child)"><i class="ion-edit"></i></button>
            <button type="button" class="btn-no" ng-click="deleteChild(child)"><i class="ion-ios-trash-outline"></i></button>
          </div>
        </div>
        <div class="points">
          <h3>{{child.points}}</h3>
          <span>pts</span>
        </div>
      </div>
      <div class="clear"></div>
    </li>

    <li class="add-children" ng-if="addChild" ng-click="addChild()">
      <div class="user">
        <button class="btn-add-child">Adicionar criança</button>
        <div class="points">
          <i class="ion-android-add-circle"></i>
        </div>
      </div>
    </li>

  </ul>
  <div class="clear"></div>
</div>
